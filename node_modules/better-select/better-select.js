let e=document;function f(a){a.a.classList.add("hidden");a.input.setAttribute("aria-expanded","false");a.b="";h(a)}function k(a){a.input.classList.remove("focus")}function h(a){for(;a.a.firstChild;)a.a.firstChild.remove()}function l(a){return Array.from(a.select.options).filter(b=>b.value.trim().length).map(({text:b,value:c})=>({text:b,value:c}))}
function m(a,b){h(a);a.b="";let c=document.createDocumentFragment().appendChild(e.createElement("div"));if(b.length)for(let g=0;g<b.length;g++){var d=b[g];c.insertAdjacentHTML("beforeend",`<li tabindex=-1 role=option aria-selected=false data-value=${d.value} id=option-${g}>${d.text}</li>`)}else c.insertAdjacentHTML("beforeend","<li class=no-result>No results</li>");a.a.append(...Array.from(c.children));a.a.scrollTop=a.a.scrollTop}
function n(a,b){a.status.textContent=0===b?"No results.":`${b} results available.`}function p(a){a.a.classList.remove("hidden");a.input.setAttribute("aria-expanded","true")}function q(a,b){return Array.from(a.select.options).filter(c=>c.value&&a.f(c,b)).map(({text:c,value:d})=>({text:c,value:d}))}
function r(a,b){b=b.dataset.value;a.select.value=b;a.input.value=b.trim().length?a.select.options[a.select.selectedIndex].text:"";b=e.createEvent("HTMLEvents");b.initEvent("change",!0,!0);a.select.dispatchEvent(b);f(a);a.input.focus()}function t(a,b){b=b.toLowerCase();return Array.from(a.select.options).find(c=>c.text.toLowerCase()===b)}function u(a,b){a.b&&v(a).setAttribute("aria-selected","false");b.scrollIntoView({block:"center"});a.b=b.id;b.setAttribute("aria-selected","true");b.focus()}
function v(a){return a.shadowRoot.getElementById(a.b)}
class w extends HTMLElement{constructor(){super();this.h=a=>{this.contains(a.target)||(f(this),k(this))};this.c=a=>{h(this);let b=l(this);m(this,b);n(this,b.length);p(this);a.currentTarget instanceof HTMLInputElement&&a.currentTarget.select()};this.j=a=>{9===a.keyCode&&(f(this),k(this))};this.l=a=>{switch(a.keyCode){case 40:this.B();break;case 27:case 38:case 37:case 39:case 32:case 13:case 9:case 16:break;default:this.C()}};this.i=()=>{this.input.classList.add("focus")};this.g=a=>{this.c(a);this.input.focus()};
this.m=a=>{switch(a.keyCode){case 38:return this.A(a);case 40:return this.s(a);case 13:return this.u(a);case 32:return this.w(a);case 27:return this.v();case 9:f(this);k(this);break;default:this.input.focus()}};this.C=()=>{var a=this.input.value.trim();0<a.length?(a=q(this,a.toLowerCase()),m(this,a),p(this),n(this,a.length)):f(this);a=t(this,this.input.value.trim());this.select.value=a?a.value:""};this.v=()=>{h(this);f(this);this.input.focus()};this.u=a=>{this.b&&r(this,v(this));a.preventDefault()};
this.w=a=>{this.b&&(r(this,v(this)),a.preventDefault())};this.o=a=>{a=a.target;a instanceof HTMLLIElement&&a.matches('[role="option"]')&&r(this,a)};this.B=()=>{var a=this.input.value.trim();a=!a.length||t(this,a)?l(this):q(this,a);a.length&&(m(this,a),p(this),u(this,this.a.querySelector("li")))};this.s=a=>{let b=v(this).nextElementSibling;b&&u(this,b);a.preventDefault()};this.A=a=>{if(this.b){let b=v(this).previousElementSibling;b?u(this,b):(this.input.focus(),f(this))}a.preventDefault()};this.attachShadow({mode:"open"});
this.b="";if(this.getAttribute("match")){let a=window[this.getAttribute("match")];"function"===typeof a&&2==a.length?this.f=a:console.error(Error("`match` must be a global function."))}}connectedCallback(){this.select=this.querySelector("select");let a=this.shadowRoot;{var b=this.select;let {id:d,selectedIndex:g,options:y}=b;var c=y[g];c=c&&c.value.trim()?c.text:null;let x=`list-${d}`;b=e.querySelector(`label[for="${d}"]`)||b.closest("label");b=`<div class=autocomplete><style>${":host{--input-color:#000;--input-background:#fff;--input-border-width:2px;--input-border-color:#718096;--focus-outline-width:3px;--focus-outline-color:#ecc94b;--menu-max-height:16em;--item-color:#000;--item-background:#fff;--item-color-active:#fff;--item-background-active:#111;--caret-color:var(--input-color);--item-padding:0.5em;display:inline-block}.visually-hidden,::slotted(*){border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.hidden{display:none}.autocomplete{position:relative;--input-border:var(--input-border-width) solid var(--input-border-color)}input[type=text]{border-radius:0;box-sizing:border-box;width:100%;font-size:inherit;font-family:inherit;line-height:inherit;color:var(--input-color);background:var(--input-background);padding:var(--item-padding);border:var(--input-border)}input[type=text].focus{outline-offset:0;outline:var(--focus-outline-width) solid var(--focus-outline-color)}svg{position:absolute;width:1.5em;height:1.5em;right:0;top:0;fill:var(--caret-color);transform:translate(-50%,50%);cursor:default}[role=listbox]{margin:0;padding:0;max-height:var(--menu-max-height);overflow-y:auto;-webkit-overflow-scrolling:touch;position:absolute;top:100%;width:100%;background-color:#f7fafc;border-radius:0;box-sizing:border-box;z-index:2;border:var(--input-border)}.no-result,[role=option]{padding:var(--item-padding);display:block;outline:0;margin:0;color:var(--item-color);background-color:var(--item-background);border-bottom:var(--input-border);border-width:1px}[role=option]:hover,[role=option][aria-selected=true]{color:var(--item-color-active);background-color:var(--item-background-active);cursor:default}.no-result{cursor:not-allowed}"}</style><slot></slot><input autocapitalize=none type=text autocomplete=off aria-autocomplete=list role=combobox aria-owns=${x} id=${d} ${b?
`aria-label="${b.textContent}"`:""} ${c?`value="${c}"`:""}> <svg focusable=false viewBox="0 0 25 25" aria-hidden=true><g><polygon points="0 0 22 0 11 17"></polygon></g></svg><ul role=listbox class=hidden id=${x}></ul><div aria-live=polite role=status class=visually-hidden></div></div>`}a.innerHTML=b;this.select.setAttribute("aria-hidden","true");this.select.setAttribute("tabindex","-1");this.select.classList.add("visually-hidden");this.select.id="";this.input=a.querySelector("input");this.status=
a.querySelector('[role="status"]');this.a=a.querySelector("ul");e.addEventListener("click",this.h);this.input.addEventListener("click",this.c);this.input.addEventListener("keydown",this.j);this.input.addEventListener("keyup",this.l);this.input.addEventListener("focus",this.i);this.a.addEventListener("click",this.o);this.a.addEventListener("keydown",this.m);a.querySelector("svg").addEventListener("click",this.g)}disconnectedCallback(){e.removeEventListener("click",this.h);this.input.removeEventListener("click",
this.c);this.input.removeEventListener("keydown",this.j);this.input.removeEventListener("keyup",this.l);this.input.removeEventListener("focus",this.i);this.a.removeEventListener("click",this.o);this.a.removeEventListener("keydown",this.m);this.shadowRoot.querySelector("svg").querySelector("svg").removeEventListener("click",this.g)}f(a,b){b=b.toLowerCase();return a.text.toLowerCase().includes(b)||!!a.dataset.alt&&a.dataset.alt.toLowerCase().includes(b)}}
e.querySelector("better-select")&&!customElements.get("better-select")&&customElements.define("better-select",w);export var BetterSelect=w
